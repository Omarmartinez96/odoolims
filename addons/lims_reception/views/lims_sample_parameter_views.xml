<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <data>

    <!-- VISTA DE LISTA DE PAR츼METROS -->
    <record id="view_lims_sample_parameter_list" model="ir.ui.view">
      <field name="name">lims.sample.parameter.list</field>
      <field name="model">lims.sample.parameter</field>
      <field name="arch" type="xml">
        <list string="Par치metros de An치lisis" default_order="sequence, name">
          <field name="sequence" widget="handle"/>
          <field name="name"/>
          <field name="sample_id"/>
          <field name="category"/>
          <field name="unit"/>
          <field name="method"/>
          <field name="state" widget="badge" 
                 decoration-info="state == 'pending'" 
                 decoration-warning="state == 'in_progress'" 
                 decoration-success="state == 'completed'"
                 decoration-muted="state == 'cancelled'"/>
          <field name="result"/>
        </list>
      </field>
    </record>

    <!-- VISTA DE FORMULARIO DE PAR츼METROS -->
    <record id="view_lims_sample_parameter_form" model="ir.ui.view">
      <field name="name">lims.sample.parameter.form</field>
      <field name="model">lims.sample.parameter</field>
      <field name="arch" type="xml">
        <form string="Par치metro de An치lisis">
          <header>
            <field name="state" widget="statusbar" 
                   statusbar_visible="pending,in_progress,completed"/>
          </header>
          
          <sheet>
            <div class="oe_title">
              <h1>
                <field name="name" placeholder="Nombre del par치metro" required="1"/>
              </h1>
            </div>

            <!-- Informaci칩n b치sica -->
            <group>
              <group string="游늶 Informaci칩n General">
                <field name="sample_id" readonly="1" 
                       options="{'no_create': True, 'no_open': True}"/>
                <field name="category"/>
                <field name="unit" placeholder="Ej: mg/L, 췃g/g, UFC/mL"/>
                <field name="sequence"/>
              </group>
              <group string="游댧 M칠todo de An치lisis">
                <field name="method" placeholder="M칠todo de an치lisis"/>
                <field name="method_reference" placeholder="Ej: ASTM D1293, EPA 200.8"/>
                <field name="template_id" readonly="1"/>
              </group>
            </group>

            <!-- Descripci칩n -->
            <group string="游닇 Descripci칩n">
              <field name="description" nolabel="1" 
                     placeholder="Descripci칩n del par치metro y procedimiento..."/>
            </group>

            <!-- Notebook con pesta침as -->
            <notebook>
              <!-- Condiciones de an치lisis -->
              <page string="游빍 Condiciones de An치lisis">
                <group>
                  <group string="Condiciones de Incubaci칩n">
                    <field name="incubation_temperature" placeholder="Ej: 37춿C, 25췀2춿C"/>
                    <field name="incubation_time" placeholder="Ej: 24h, 48-72h"/>
                    <field name="culture_medium" placeholder="Para an치lisis microbiol칩gicos"/>
                  </group>
                  <group string="Otras Condiciones">
                    <field name="ph_conditions" placeholder="Condiciones de pH"/>
                  </group>
                </group>
                
                <group string="Condiciones de Preservaci칩n">
                  <field name="preservation_conditions" nolabel="1" 
                         placeholder="Refrigeraci칩n, conservantes, tiempo m치ximo de almacenamiento..."/>
                </group>
                
                <group string="Preparaci칩n de Muestra">
                  <field name="sample_preparation" nolabel="1" 
                         placeholder="Pasos previos al an치lisis, diluciones, filtrados..."/>
                </group>
              </page>

              <!-- Resultados -->
              <page string="游늵 Resultados y L칤mites">
                <group>
                  <group string="Resultado">
                    <field name="result" placeholder="Resultado del an치lisis"/>
                  </group>
                  <group string="L칤mites de Detecci칩n">
                    <field name="detection_limit" placeholder="L칤mite de detecci칩n"/>
                    <field name="quantification_limit" placeholder="L칤mite de cuantificaci칩n"/>
                  </group>
                </group>
              </page>

              <!-- Observaciones -->
              <page string="游닇 Notas y Observaciones">
                <group string="Notas del Analista">
                  <field name="analyst_notes" nolabel="1" 
                         placeholder="Notas t칠cnicas, desviaciones del m칠todo, problemas encontrados..."/>
                </group>
                
                <group string="Observaciones Generales">
                  <field name="observations" nolabel="1" 
                         placeholder="Observaciones adicionales sobre el an치lisis..."/>
                </group>
              </page>
            </notebook>

          </sheet>
        </form>
      </field>
    </record>

    <!-- VISTA DE B칔SQUEDA/FILTROS -->
    <record id="view_lims_sample_parameter_search" model="ir.ui.view">
      <field name="name">lims.sample.parameter.search</field>
      <field name="model">lims.sample.parameter</field>
      <field name="arch" type="xml">
        <search string="Buscar Par치metros">
          <field name="name" string="Par치metro"/>
          <field name="sample_id" string="Muestra"/>
          <field name="method" string="M칠todo"/>
          
          <filter string="Pendientes" name="pending" domain="[('state','=','pending')]"/>
          <filter string="En An치lisis" name="in_progress" domain="[('state','=','in_progress')]"/>
          <filter string="Completados" name="completed" domain="[('state','=','completed')]"/>
          <filter string="Cancelados" name="cancelled" domain="[('state','=','cancelled')]"/>
          
          <separator/>
          <filter string="F칤sicos" name="physical" domain="[('category','=','physical')]"/>
          <filter string="Qu칤micos" name="chemical" domain="[('category','=','chemical')]"/>
          <filter string="Microbiol칩gicos" name="microbiological" domain="[('category','=','microbiological')]"/>
          
          <group expand="0" string="Agrupar Por">
            <filter string="Estado" name="group_state" domain="[]" context="{'group_by':'state'}"/>
            <filter string="Categor칤a" name="group_category" domain="[]" context="{'group_by':'category'}"/>
            <filter string="Muestra" name="group_sample" domain="[]" context="{'group_by':'sample_id'}"/>
            <filter string="M칠todo" name="group_method" domain="[]" context="{'group_by':'method'}"/>
          </group>
        </search>
      </field>
    </record>

    <!-- ACCI칍N PARA PAR츼METROS -->
    <record id="action_lims_sample_parameters" model="ir.actions.act_window">
      <field name="name">Par치metros de An치lisis</field>
      <field name="res_model">lims.sample.parameter</field>
      <field name="view_mode">list,form</field>
      <field name="view_id" ref="view_lims_sample_parameter_list"/>
      <field name="search_view_id" ref="view_lims_sample_parameter_search"/>
      <field name="context">{
        'search_default_pending': 1,
      }</field>
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
          No hay par치metros registrados
        </p>
        <p>
          Los par치metros se crean desde las muestras o se pueden crear manualmente aqu칤.
        </p>
      </field>
    </record>

    <!-- MEN칔 PARA PAR츼METROS (OPCIONAL) -->
    <menuitem id="lims_sample_parameters_menu" 
              name="Par치metros de An치lisis"
              parent="lims_custody_menu_root"
              action="action_lims_sample_parameters" 
              sequence="25"/>

  </data>
</odoo>