<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- Vista Dashboard usando Kanban -->
        <record id="view_lims_dashboard_kanban" model="ir.ui.view">
            <field name="name">lims.analysis.dashboard.kanban</field>
            <field name="model">lims.analysis.v2</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_dashboard" create="false" js_class="dashboard_kanban" sample="0">
                    <field name="id"/>
                    <field name="sample_reception_id"/>
                    <field name="total_samples_count"/>
                    <field name="samples_all_ready_count"/>
                    <field name="samples_in_process_count"/>
                    <field name="samples_completed_count"/>
                    <field name="samples_reported_count"/>
                    <field name="samples_signed_count"/>
                    <field name="samples_pending_count"/>
                    <field name="samples_this_week_count"/>
                    <field name="samples_today_count"/>
                    <field name="samples_with_revisions_count"/>
                    
                    <templates>
                        <t t-name="kanban-box">
                            <div class="container-fluid mt-4">
                                <h2 class="text-center mb-4">üìä Dashboard de An√°lisis LIMS</h2>
                                
                                <!-- Primera fila de m√©tricas -->
                                <div class="row">
                                    
                                    <!-- Total de Muestras -->
                                    <div class="col-lg-4 col-md-6 mb-4">
                                        <div class="card text-center h-100">
                                            <div class="card-body bg-primary text-white">
                                                <h1 class="card-title"><t t-esc="record.total_samples_count.value"/></h1>
                                                <p class="card-text">üìä Total de Muestras</p>
                                                <a type="object" name="action_view_all_samples" class="btn btn-light btn-sm">Ver Todas</a>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Muestras Listas -->
                                    <div class="col-lg-4 col-md-6 mb-4">
                                        <div class="card text-center h-100">
                                            <div class="card-body bg-success text-white">
                                                <h1 class="card-title"><t t-esc="record.samples_all_ready_count.value"/></h1>
                                                <p class="card-text">‚úÖ Todos Par√°metros Listos</p>
                                                <a type="object" name="action_view_samples_all_ready" class="btn btn-light btn-sm">Ver Listas</a>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- En Proceso -->
                                    <div class="col-lg-4 col-md-6 mb-4">
                                        <div class="card text-center h-100">
                                            <div class="card-body bg-warning text-dark">
                                                <h1 class="card-title"><t t-esc="record.samples_in_process_count.value"/></h1>
                                                <p class="card-text">‚è≥ En Proceso</p>
                                                <a type="object" name="action_view_samples_in_process" class="btn btn-dark btn-sm">Ver En Proceso</a>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Completadas -->
                                    <div class="col-lg-4 col-md-6 mb-4">
                                        <div class="card text-center h-100">
                                            <div class="card-body bg-info text-white">
                                                <h1 class="card-title"><t t-esc="record.samples_completed_count.value"/></h1>
                                                <p class="card-text">üéØ Par√°metros Terminados</p>
                                                <a type="object" name="action_view_samples_completed" class="btn btn-light btn-sm">Ver Completadas</a>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Reportadas -->
                                    <div class="col-lg-4 col-md-6 mb-4">
                                        <div class="card text-center h-100">
                                            <div class="card-body bg-secondary text-white">
                                                <h1 class="card-title"><t t-esc="record.samples_reported_count.value"/></h1>
                                                <p class="card-text">üìß Reportadas</p>
                                                <a type="object" name="action_view_samples_reported" class="btn btn-light btn-sm">Ver Reportadas</a>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Firmadas -->
                                    <div class="col-lg-4 col-md-6 mb-4">
                                        <div class="card text-center h-100">
                                            <div class="card-body bg-dark text-white">
                                                <h1 class="card-title"><t t-esc="record.samples_signed_count.value"/></h1>
                                                <p class="card-text">‚úçÔ∏è Firmadas</p>
                                                <a type="object" name="action_view_samples_signed" class="btn btn-light btn-sm">Ver Firmadas</a>
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>
                                
                                <!-- Estad√≠sticas adicionales -->
                                <div class="card mt-4">
                                    <div class="card-header bg-light">
                                        <h5 class="mb-0">üìà Estad√≠sticas R√°pidas</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row text-center">
                                            <div class="col-md-3">
                                                <strong>Esta Semana</strong><br/>
                                                <span class="badge badge-primary" style="font-size: 1.5em;">
                                                    <t t-esc="record.samples_this_week_count.value"/>
                                                </span>
                                            </div>
                                            <div class="col-md-3">
                                                <strong>Hoy</strong><br/>
                                                <span class="badge badge-success" style="font-size: 1.5em;">
                                                    <t t-esc="record.samples_today_count.value"/>
                                                </span>
                                            </div>
                                            <div class="col-md-3">
                                                <strong>Sin Procesar</strong><br/>
                                                <span class="badge badge-danger" style="font-size: 1.5em;">
                                                    <t t-esc="record.samples_pending_count.value"/>
                                                </span>
                                            </div>
                                            <div class="col-md-3">
                                                <strong>Con Revisiones</strong><br/>
                                                <span class="badge badge-warning" style="font-size: 1.5em;">
                                                    <t t-esc="record.samples_with_revisions_count.value"/>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
        
        <!-- ACCI√ìN PRINCIPAL DEL DASHBOARD -->
        <record id="action_lims_dashboard" model="ir.actions.act_window">
            <field name="name">Dashboard LIMS</field>
            <field name="res_model">lims.analysis.v2</field>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="view_lims_dashboard_kanban"/>
            <field name="limit">1</field>
            <field name="context">{'create': False, 'search_default_limit': 1}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No hay datos para mostrar en el Dashboard
                </p>
                <p>
                    El dashboard requiere al menos una muestra en el sistema.
                </p>
            </field>
        </record>
        
        <!-- MEN√ö DEL DASHBOARD -->
        <menuitem id="menu_lims_dashboard" 
                  name="üìä Dashboard" 
                  parent="menu_lims_analysis_v2_root" 
                  action="action_lims_dashboard" 
                  sequence="1"/>
        
    </data>
</odoo>