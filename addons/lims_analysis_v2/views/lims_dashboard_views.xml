<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- Vista especial de Dashboard usando Tree sin crear registros -->
        <record id="view_lims_dashboard_tree" model="ir.ui.view">
            <field name="name">lims.analysis.dashboard.tree</field>
            <field name="model">lims.analysis.v2</field>
            <field name="arch" type="xml">
                <tree string="Dashboard LIMS" create="false" edit="false" delete="false" limit="1" decoration-bf="1==1">
                    <!-- Campo oculto para evitar errores -->
                    <field name="sample_reception_id" invisible="1"/>
                    
                    <!-- HTML personalizado para el dashboard -->
                    <field name="id" invisible="1"/>
                    
                    <header>
                        <div style="width: 100%; padding: 20px;">
                            <h2 style="text-align: center; margin-bottom: 30px;">üìä Dashboard de An√°lisis de Muestras</h2>
                            
                            <!-- Fila de m√©tricas principales -->
                            <div style="display: flex; flex-wrap: wrap; justify-content: space-around; gap: 20px;">
                                
                                <!-- Total de Muestras -->
                                <div style="flex: 0 1 30%; min-width: 200px; background: #007bff; color: white; padding: 20px; border-radius: 10px; text-align: center;">
                                    <h1 style="margin: 10px 0;"><field name="total_samples_count"/></h1>
                                    <p style="margin: 5px 0;">üìä Total de Muestras</p>
                                    <button name="action_view_all_samples" type="object" string="Ver Todas" style="background: white; color: #007bff; border: none; padding: 5px 15px; border-radius: 5px; cursor: pointer;"/>
                                </div>
                                
                                <!-- Muestras Listas -->
                                <div style="flex: 0 1 30%; min-width: 200px; background: #28a745; color: white; padding: 20px; border-radius: 10px; text-align: center;">
                                    <h1 style="margin: 10px 0;"><field name="samples_all_ready_count"/></h1>
                                    <p style="margin: 5px 0;">‚úÖ Todos los Par√°metros Listos</p>
                                    <button name="action_view_samples_all_ready" type="object" string="Ver Listas" style="background: white; color: #28a745; border: none; padding: 5px 15px; border-radius: 5px; cursor: pointer;"/>
                                </div>
                                
                                <!-- En Proceso -->
                                <div style="flex: 0 1 30%; min-width: 200px; background: #ffc107; color: #212529; padding: 20px; border-radius: 10px; text-align: center;">
                                    <h1 style="margin: 10px 0;"><field name="samples_in_process_count"/></h1>
                                    <p style="margin: 5px 0;">‚è≥ En Proceso</p>
                                    <button name="action_view_samples_in_process" type="object" string="Ver En Proceso" style="background: white; color: #212529; border: none; padding: 5px 15px; border-radius: 5px; cursor: pointer;"/>
                                </div>
                                
                                <!-- Completadas -->
                                <div style="flex: 0 1 30%; min-width: 200px; background: #17a2b8; color: white; padding: 20px; border-radius: 10px; text-align: center;">
                                    <h1 style="margin: 10px 0;"><field name="samples_completed_count"/></h1>
                                    <p style="margin: 5px 0;">üéØ Par√°metros Terminados</p>
                                    <button name="action_view_samples_completed" type="object" string="Ver Completadas" style="background: white; color: #17a2b8; border: none; padding: 5px 15px; border-radius: 5px; cursor: pointer;"/>
                                </div>
                                
                                <!-- Reportadas -->
                                <div style="flex: 0 1 30%; min-width: 200px; background: #6c757d; color: white; padding: 20px; border-radius: 10px; text-align: center;">
                                    <h1 style="margin: 10px 0;"><field name="samples_reported_count"/></h1>
                                    <p style="margin: 5px 0;">üìß Reportadas</p>
                                    <button name="action_view_samples_reported" type="object" string="Ver Reportadas" style="background: white; color: #6c757d; border: none; padding: 5px 15px; border-radius: 5px; cursor: pointer;"/>
                                </div>
                                
                                <!-- Firmadas -->
                                <div style="flex: 0 1 30%; min-width: 200px; background: #343a40; color: white; padding: 20px; border-radius: 10px; text-align: center;">
                                    <h1 style="margin: 10px 0;"><field name="samples_signed_count"/></h1>
                                    <p style="margin: 5px 0;">‚úçÔ∏è Firmadas</p>
                                    <button name="action_view_samples_signed" type="object" string="Ver Firmadas" style="background: white; color: #343a40; border: none; padding: 5px 15px; border-radius: 5px; cursor: pointer;"/>
                                </div>
                                
                            </div>
                            
                            <!-- Estad√≠sticas adicionales -->
                            <div style="margin-top: 40px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                                <h4 style="text-align: center; margin-bottom: 20px;">üìà Estad√≠sticas R√°pidas</h4>
                                <div style="display: flex; justify-content: space-around; text-align: center;">
                                    <div>
                                        <strong>Esta Semana</strong><br/>
                                        <span style="font-size: 24px; color: #007bff;"><field name="samples_this_week_count"/></span>
                                    </div>
                                    <div>
                                        <strong>Hoy</strong><br/>
                                        <span style="font-size: 24px; color: #28a745;"><field name="samples_today_count"/></span>
                                    </div>
                                    <div>
                                        <strong>Sin Procesar</strong><br/>
                                        <span style="font-size: 24px; color: #dc3545;"><field name="samples_pending_count"/></span>
                                    </div>
                                    <div>
                                        <strong>Con Revisiones</strong><br/>
                                        <span style="font-size: 24px; color: #ffc107;"><field name="samples_with_revisions_count"/></span>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </header>
                </tree>
            </field>
        </record>
        
        <!-- ACCI√ìN PRINCIPAL DEL DASHBOARD -->
        <record id="action_lims_dashboard" model="ir.actions.act_window">
            <field name="name">Dashboard LIMS</field>
            <field name="res_model">lims.analysis.v2</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_lims_dashboard_tree"/>
            <field name="limit">1</field>
            <field name="context">{'create': False}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No hay datos para mostrar en el Dashboard
                </p>
                <p>
                    El dashboard requiere al menos una muestra en el sistema.
                </p>
            </field>
        </record>
        
        <!-- MEN√ö DEL DASHBOARD -->
        <menuitem id="menu_lims_dashboard" 
                  name="üìä Dashboard" 
                  parent="menu_lims_analysis_v2_root" 
                  action="action_lims_dashboard" 
                  sequence="1"/>
        
    </data>
</odoo>