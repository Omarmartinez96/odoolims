<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- Vista del Wizard de Múltiples Analistas -->
        <record id="view_parameter_analyst_wizard_form" model="ir.ui.view">
            <field name="name">parameter.analyst.assignment.wizard.form</field>
            <field name="model">parameter.analyst.assignment.wizard</field>
            <field name="arch" type="xml">
                <form string="Gestionar Analistas Responsables">
                    
                    <!-- Información del parámetro -->
                    <div class="alert alert-info">
                        <h4><i class="fa fa-users"/> 👥 Gestión de Analistas Responsables</h4>
                        <p>Agregue o remueva analistas responsables de este parámetro con verificación PIN.</p>
                    </div>
                    
                    <!-- Analistas actuales -->
                    <group string="👥 Analistas Actuales" invisible="not current_analyst_ids">
                        <field name="current_analyst_ids" nolabel="1" readonly="1" widget="many2many_tags"/>
                    </group>
                    
                    <div invisible="current_analyst_ids" style="text-align: center; color: #6c757d; margin: 15px 0;">
                        <i class="fa fa-info-circle"/> No hay analistas asignados actualmente
                    </div>
                    
                    <!-- Agregar nuevo analista -->
                    <group string="➕ Agregar Analista">
                        <group>
                            <field name="analyst_to_add_id" 
                                   placeholder="Seleccionar analista para agregar"
                                   options="{'no_create': True, 'no_open': True}"/>
                        </group>
                        <group>
                            <field name="pin_input" 
                                   password="True" 
                                   placeholder="PIN del analista seleccionado"
                                   invisible="not analyst_to_add_id"/>
                        </group>
                    </group>
                    
                    <!-- Botón para agregar -->
                    <div style="text-align: center; margin: 15px 0;">
                        <button name="action_add_analyst" 
                                type="object" 
                                string="✅ Verificar PIN y Agregar" 
                                class="btn-success"
                                invisible="not analyst_to_add_id or not pin_input"/>
                    </div>
                    
                    <!-- Remover analista -->
                    <group string="➖ Remover Analista" invisible="not current_analyst_ids">
                        <field name="analyst_to_remove_id" 
                               placeholder="Seleccionar analista para remover"
                               domain="[('id', 'in', current_analyst_ids)]"/>
                        
                        <!-- Botón para remover -->
                        <button name="action_remove_analyst" 
                                type="object" 
                                string="🗑️ Remover Analista" 
                                class="btn-warning"
                                invisible="not analyst_to_remove_id"
                                confirm="¿Está seguro de remover este analista?"/>
                    </group>
                    
                    <!-- Instrucciones -->
                    <div style="background-color: #fff3cd; padding: 15px; margin: 15px 0; border-left: 4px solid #ffc107;">
                        <h6 style="margin-top: 0; color: #856404;">💡 Instrucciones:</h6>
                        <ul style="margin: 5px 0; color: #856404;">
                            <li><strong>Agregar:</strong> Seleccione analista e ingrese su PIN personal</li>
                            <li><strong>Remover:</strong> Seleccione de la lista y confirme la acción</li>
                            <li><strong>Múltiples:</strong> Puede agregar varios analistas secuencialmente</li>
                            <li><strong>Seguridad:</strong> Cada analista debe verificar su identidad con PIN</li>
                        </ul>
                    </div>
                    
                    <footer>
                        <button string="✅ Finalizar" 
                                class="btn-primary" 
                                special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

    </data>
</odoo>